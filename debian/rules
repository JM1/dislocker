#!/usr/bin/make -f
# See debhelper(7) (uncomment to enable)
# output every command that modifies files on the build system.
DH_VERBOSE = 1

# see EXAMPLES in dpkg-buildflags(1) and read /usr/share/dpkg/*
DPKG_EXPORT_BUILDFLAGS = 1

# see FEATURE AREAS in dpkg-buildflags(1)
#export DEB_BUILD_MAINT_OPTIONS = hardening=+all
#export DEB_BUILD_MAINT_OPTIONS = hardening=-all,+pie,+fortify,+stackprotector,+relro,+bindnow,+format
export DEB_BUILD_MAINT_OPTIONS = hardening=+all,-pie

include /usr/share/dpkg/default.mk

# see ENVIRONMENT in dpkg-buildflags(1)
# package maintainers to append CFLAGS
#export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
# package maintainers to append LDFLAGS
#export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed

include debian/not-installed

# main packaging script based on dh7 syntax
%:
	dh $@ --sourcedirectory=src --buildsystem=makefile

override_dh_auto_install:
	mkdir -p debian/tmp/usr/bin
	mkdir -p debian/tmp/usr/lib
	mkdir -p debian/tmp/usr/share/man/man1
	dh_auto_install

override_dh_install:
	# Remove files which aren't installed. Do not use -f to ensure we notice disappearing files:
	set -e; for file in $(NOT_INSTALLED); do rm debian/tmp/$$file; done
	
	dh_install --fail-missing
